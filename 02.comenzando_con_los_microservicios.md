# Sección 02: Comenzando con los microservicios

---

## Creando nuestro microservicio products

Iniciamos creando el `product-service` desde
[Spring Initializr](https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.4.4&packaging=jar&jvmVersion=21&groupId=dev.magadiflo&artifactId=product-service&name=product-service&description=Product%20Service%20Project&packageName=dev.magadiflo.product.app&dependencies=web,data-jpa,lombok,mysql,cloud-starter)
con las siguientes dependencias.

````xml
<!--Spring Boot 3.4.4-->
<!--Java 21-->
<!--Spring Cloud Version 2024.0.1-->
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.cloud</groupId>
        <artifactId>spring-cloud-starter</artifactId>
    </dependency>

    <dependency>
        <groupId>com.mysql</groupId>
        <artifactId>mysql-connector-j</artifactId>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <optional>true</optional>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-test</artifactId>
        <scope>test</scope>
    </dependency>
</dependencies>
````

**Nota**
> En `spring initializr` agregamos la dependencia `Cloud Bootstrap` simplemente para que desde el principio tengamos la
> versión de `Spring Cloud`.

**Importante**
> Cada versión de `Spring Boot` tiene su correspondiente versión específica de `Spring Cloud`.

Configuramos el `application.yml` del `product-service` con las siguientes propiedades:

````yml
server:
  port: 8001
  error:
    include-message: always

spring:
  application:
    name: product-service
````

## Añadiendo la clase Entity JPA

Creamos la entidad `Product` con anotaciones de `jpa`. Además, nos apoyamos de las anotaciones de `Lombok` para evitar
el boilerplate (código repetitivo).

````java

@ToString
@AllArgsConstructor
@NoArgsConstructor
@Builder
@Getter
@Setter
@Entity
@Table(name = "products")
public class Product {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String name;
    private BigDecimal price;
    private LocalDateTime createAt;
}
````

## Creando el repositorio JPA con Spring Data JPA

En el microservicio `product-service`, creamos el repositorio `ProductRepository` para la entidad `Product`.

````java
public interface ProductRepository extends CrudRepository<Product, Long> {
}
````
