# Sección 06: Spring Cloud Config Server - Centralizando la configuración

---

## Creando el servidor de configuración

Creamos el proyecto `config-server` desde
[Spring Initializr](https://start.spring.io/#!type=maven-project&language=java&platformVersion=3.4.4&packaging=jar&jvmVersion=21&groupId=dev.magadiflo&artifactId=config-server&name=config-server&description=Config%20Server&packageName=dev.magadiflo.config.server.app&dependencies=actuator,cloud-config-server)
con las siguientes dependencias.

````xml
<!--Spring Boot 3.4.4-->
<!--Spring Cloud Version 2024.0.1-->
<!--Java 21-->
<dependencies>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-actuator</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework.cloud</groupId>
        <artifactId>spring-cloud-config-server</artifactId>
    </dependency>

    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-test</artifactId>
        <scope>test</scope>
    </dependency>
</dependencies>
````

Habilitamos el proyecto `config-server` como un servidor de configuraciones agregando la anotación `@EnableConfigServer`
en la clase principal.

````java

@EnableConfigServer
@SpringBootApplication
public class ConfigServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(ConfigServerApplication.class, args);
    }
}
````

En el `application.yml` agregamos las siguientes configuraciones.

````yml
server:
  port: 8888
  error:
    include-message: always

spring:
  application:
    name: config-server
  cloud:
    config:
      server:
        git:
          uri: file:///D:/programming/spring/01.udemy/02.andres_guzman/06.microservices_netflix_eureka/config-server-repo
````

- `spring.cloud.config.server.git.uri`, le estamos diciendo al servidor que busque los archivos de configuración en un
  repositorio `Git local`. Usar `file:///` es totalmente válido durante el desarrollo, y apunta a una carpeta local que
  simula el repositorio.


- `En Sistemas Unix (Linux/Mack)`, las rutas se escriben con una sola barra normal `/`. Por ejemplo
  `file:/Users/config`.


- `En windows`, las rutas se escriben con 3 barras. Por ejemplo: `file:///D:/programming/config`.

> Esa ruta debe contener archivos `.properties` o `.yml` con nombres del estilo `nombre-aplicacion.yml` o
> `nombre-aplicacion-profile.yml`, que es como el `config server` busca los archivos.

